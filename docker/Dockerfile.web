# Use an official Tomcat image with JDK 11 as the base
FROM tomcat:9.0-jdk11-openjdk-slim

# Set maintainer information (optional)
LABEL maintainer="PuaJM <s73003@ocean.umt.edu.my>"

# Remove default webapps to keep the image clean and minimize size
RUN rm -rf /usr/local/tomcat/webapps/ROOT \
           /usr/local/tomcat/webapps/examples \
           /usr/local/tomcat/webapps/docs \
           /usr/local/tomcat/webapps/host-manager \
           /usr/local/tomcat/webapps/manager

# Copy your MyStrive.war file into Tomcat's webapps directory.
# It's renamed to ROOT.war so it serves as the default application
# at the root context (e.g., http://localhost:8080/).
# The path `../dist/MyStrive.war` is relative to the `docker` directory.
COPY ../dist/MyStrive.war /usr/local/tomcat/webapps/ROOT.war

# Expose the default Tomcat port
EXPOSE 8080

# Command to run Tomcat (this is the default command for this image)
CMD ["catalina.sh", "run"]